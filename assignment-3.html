<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="generator" content="pandoc">
    <title>Assignment 3 (50 points) - Due on Friday September 16th</title>
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" type="text/css" href="css/bootstrap/bootstrap.css" />
    <link rel="stylesheet" type="text/css" href="css/bootstrap/bootstrap-theme.css" />
    <link rel="stylesheet" type="text/css" href="css/swc.css" />
    <link rel="alternate" type="application/rss+xml" title="Software Carpentry Blog" href="http://software-carpentry.org/feed.xml"/>
    <meta charset="UTF-8" />
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body class="lesson">
    <div class="container card">
      <div class="banner">
        <a href="http://citi.clemson.edu" title="Software Carpentry">
          <img alt="Software Carpentry banner" src="img/paw.gif" width="100px" height="auto" />
        </a>
      </div>
      <article>
      <div class="row">
        <div class="col-md-10 col-md-offset-1">
                    <h1 class="title">Assignment 3 (50 points) - Due on Friday September 16th</h1>
          <p><strong>You can work as a two-member team for this assignment</strong></p>
<p>For this assignment, you are to design, implement, test, and execute an MPI4PY program inside a Jupyter notebook that can read a number of data files concurrently, process the contents of these files, and aggregate the final information.</p>
<p>The target data files are a subset of the <em>job_events</em> table of the Google Trace Data. The Google Trace Data contains the system logs of a 12,000-machine data center for the duration of one month. This includes information about machine status, status of submitted jobs, and status of tasks spawned by these jobs. The full Google Trace Data is more than 170 GB in size. A sequential attempt to process this data set will take more than 24 hours! The detailed information about the google trace data can be found at Google cluster-usage traces format and schema and Google cluster data traces.</p>
<p>The full <em>job_events</em> Google Data Set consists of 500 comma-separated data files. The records of each file contain 8 fields:</p>
<ul>
<li>Field 1: time,INTEGER</li>
<li>Field 2: missing info,INTEGER</li>
<li>Field 3: job ID,INTEGER</li>
<li>Field 4: event type,INTEGER</li>
<li>Field 5: user,STRING_HASH</li>
<li>Field 6: scheduling class,INTEGER</li>
<li>Field 7: job name,STRING_HASH</li>
<li>Field 8: logical job name,STRING_HASH</li>
</ul>
<p>For each entry in the <em>job_events</em> data files, Field 4, event type, represents the state of the job at the time stamp time (Field 1). There are 9 different states:</p>
<ul>
<li>SUBMIT (0): A task or job became eligible for scheduling.</li>
<li>SCHEDULE (1): A job or task was scheduled on a machine. (It may not start running immediately due to code-shipping time, etc.) For jobs, this occurs the first time any task of the job is scheduled on a machine.</li>
<li>EVICT(2): A task or job was descheduled because of a higher priority task or job, because the scheduler overcommitted and the actual demand exceeded the machine capacity, because the machine on which it was running became unusable (e.g. taken offline for repairs), or because a disk holding the task’s data was lost.</li>
<li>FAIL(3): A task or job was descheduled (or, in rare cases, ceased to be eligible for scheduling while it was pending) due to a task failure.</li>
<li>FINISH(4): A task or job completed normally.</li>
<li>KILL(5): A task or job was cancelled by the user or a driver program or because another job or task on which this job was dependent died.</li>
<li>LOST(6): A task or job was presumably terminated, but a record indicating its termination was missing from our source data.</li>
<li>UPDATE_PENDING(7): A task or job’s scheduling class, resource requirements, or constraints were updated while it was waiting to be scheduled.</li>
<li>UPDATE_RUNNING(8): A task or job’s scheduling class, resource requirements, or constraints were updated while it was scheduled.</li>
</ul>
<p>You are to write an MPI program that will count the number of job instances for each of the 9 different states above. To make the execution and debugging manageable for your first program, you will process 16 files out of the entire 500 file data set. These 16 files are located at <strong>/scratch2/lngo/gtrace_small</strong> for this assignment. Start by making a data subdirectory in your /scratch2/$USER directory and then copying the 16 files into it.</p>
<p>Your MPI program must satisfy the following conditions:</p>
<ol style="list-style-type: decimal">
<li><p>The program can hardcode the path to your subdirectory that contains the 16 data files. </p></li>
<li><p>Your program can use a static file assignment strategy.  You can assume that the number of data files (16) are evenly divisible by the number of processes {1,2,4,8,16}. As all the data files follow the same naming scheme, part-00???-of-00500.csv, each process should calculate its set of files to read based on its rank and the size of the communicator (e.g., total number of processes) and then assign to a variable the name of the file(s) to open for reading (one at a time).</p></li>
<li><p>After opening each designated file, each MPI process will read through the file line by line and count the occurrences of each <em>event_type</em> in the file, storing the results for all event types in an array.  </p></li>
<li><p>When the MPI process finishes reading its files, it will send the counts of each event type as a vector to process 0.  Your program should use a REDUCE call for this step.  Process 0 will  aggregate the counts of the individual <em>event_type</em> from  information collected from all participating processes using one reduce call.</p></li>
<li><p>Process 0 will print out the final aggregation using the following format:</p></li>
</ol>
<p>Event Type                     Count</p>
<p>SUBMIT                           ????</p>
<p>SCHEDULE                     ????</p>
<p>EVICT                              ????</p>
<p>FAIL                                 ????</p>
<p>FINISH                             ????</p>
<p>KILL                                  ????</p>
<p>LOST                                ????</p>
<p>UPDATE_PENDING        ????</p>
<p>UPDATE_RUNNING        ????</p>
<ol start="6" style="list-style-type: decimal">
<li><p>You will test your program on a number of processes that is {1, 2, 4, 8, 16}.   In your testing, be sure that your program runs correctly on all numbers of processes.</p></li>
<li>Extra credit (+5):  </li>
</ol>
<ul>
<li>Add timing calls to your program to measure run time</li>
<li>Collect the run times for different number of processes {1,2,4,8,16}</li>
<li>Calculate the speedup of different number of processes {1,2,4,8,16} and use Python’s matplotlib to display a speedup graph</li>
</ul>
<h3 id="submission-instructions">Submission instructions:</h3>
<p>Submit this version of the program by emailing the notebook containing the MPI4PY program and the resulting output to the TA. If you work on this assignment as a team, you must also include a document that describes how the work is divided between the members of the team (e.g., what each member knows and does not know about the assignment).</p>
        </div>
      </div>
      </article>
      <div class="footer">
        <a class="label clemson-orange" href="http://citi.clemson.edu">CITI</a>
        <a class="label clemson-orange" href="https://github.com/clemsoncoe/hpc-workshop">Source</a>
        <a class="label clemson-orange" href="mailto:atrikut@clemson.edu">Contact</a>
        <a class="label clemson-orange" href="LICENSE.html">License</a>
      </div>
    </div>
    <!-- Javascript placed at the end of the document so the pages load faster -->
    <script src="http://software-carpentry.org/v5/js/jquery-1.9.1.min.js"></script>
    <script src="css/bootstrap/bootstrap-js/bootstrap.js"></script>
  </body>
</html>
